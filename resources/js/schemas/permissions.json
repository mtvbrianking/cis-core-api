{
  "$id": "#/schema/Permission",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "Permission model schema",
  "type": "object",
  "properties": {
    "with": {
      "$id": "#/properties/with",
      "type": "array",
      "items": {
        "anyOf": [
          {
            "$ref": "#/definitions/module"
          }
        ]
      }
    },
    "select": {
      "$id": "#/properties/select",
      "type": "array",
      "minItems": 1,
      "uniqueItems": true,
      "additionalItems": false,
      "items": {
        "$id": "#/properties/select/items",
        "type": "string",
        "enum": [
          "permissions.id",
          "permissions.module_name",
          "permissions.name",
          "permissions.description",
          "permissions.created_at",
          "permissions.updated_at"
        ]
      }
    },
    "where": {
      "$id": "#/properties/where",
      "type": "array",
      "items": {
        "$id": "#/properties/where/items",
        "type": "object",
        "required": [
          "field",
          "operator",
          "value"
        ],
        "properties": {
          "field": {
            "$id": "#/properties/where/items/properties/field",
            "type": "string",
            "enum": [
              "permissions.id",
              "permissions.module_name",
              "permissions.name",
              "permissions.description",
              "permissions.created_at",
              "permissions.updated_at"
            ]
          },
          "operator": {
            "$id": "#/properties/where/items/properties/operator",
            "type": "string",
            "enum": [
              "=",
              "!=",
              "<>",
              ">",
              "<",
              ">=",
              "<=",
              "!<",
              "!>",
              "like",
              "ilike",
              "in",
              "between"
            ]
          },
          "value": {
            "$id": "#/properties/where/items/properties/value",
            "type": [
              "array",
              "string",
              "integer"
            ]
          }
        }
      }
    },
    "sort": {
      "$id": "#/properties/sort",
      "type": "array",
      "items": {
        "$id": "#/properties/sort/items",
        "type": "object",
        "required": [
          "field",
          "direction"
        ],
        "properties": {
          "field": {
            "$id": "#/properties/sort/items/properties/field",
            "type": "string",
            "enum": [
              "permissions.id",
              "permissions.module_name",
              "permissions.name",
              "permissions.description",
              "permissions.created_at",
              "permissions.updated_at"
            ]
          },
          "direction": {
            "$id": "#/properties/sort/items/properties/direction",
            "type": "string",
            "enum": [
              "asc",
              "desc"
            ]
          }
        }
      }
    },
    "limit": {
      "$id": "#/properties/limit",
      "type": "integer",
      "default": 15,
      "minimum": 0,
      "maximum": 100
    },
    "page": {
      "$id": "#/properties/page",
      "type": "integer"
    }
  },
  "definitions": {
    "module": {
      "$id": "#/definitions/module",
      "type": "object",
      "required": [
        "relation"
      ],
      "properties": {
        "relation": {
          "$id": "#/properties/relation",
          "type": "string",
          "enum": [
            "module"
          ]
        },
        "select": {
          "$id": "#/properties/select",
          "type": "array",
          "minItems": 1,
          "uniqueItems": true,
          "items": {
            "$id": "#/properties/select/items",
            "type": "string",
            "enum": [
              "modules.name",
              "modules.description",
              "modules.category",
              "modules.created_at",
              "modules.updated_at",
              "modules.deleted_at"
            ]
          }
        }
      }
    }
  }
}
